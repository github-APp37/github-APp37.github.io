<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Часы</title>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
var canvas = document.getElementById('canvas'),
    c = canvas.getContext('2d');

canvas.width = 800;
canvas.height = 300;
var img = new Image();
img.src = 'cyferblat.jpg';
    var opt = {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    };
    var opt1 = {
          hour: 'numeric',
          minute: 'numeric',
          second: 'numeric'
    };
var data = new Date();


function timer(d){
	c.beginPath();
	c.fillStyle = "white";
	c.fillRect(300,0,500,500);
	c.fillStyle = "black";
	c.font = "italic 30pt Arial";
	c.fillText(d.toLocaleString('ru', opt1), 350, 50);
	c.fillText(d.toLocaleString('ru', opt) , 300, 100);
	c.closePath();
	
}

function draw(centerX, centerY, radius, startAngle, endAngle, color ){
    c.fillStyle = color;
    c.beginPath();
    c.moveTo(centerX,centerY);
    c.arc(centerX, centerY, radius, startAngle, endAngle);
    c.closePath();
    c.fill();
    c.closePath();
}

function drawArc(centerX, centerY, radius, startAngle, endAngle){
    c.beginPath();
    c.arc(centerX, centerY, radius, startAngle, endAngle);
    c.stroke();
    c.closePath();

}


function drawline(x,y,toX,toY,color)
		{
			c.beginPath();
			c.strokeStyle = color;
			c.moveTo(x,y);
			c.lineTo(toX,toY);
			c.stroke();
			c.closePath();
		}

function rotate(ang,r,color){
x1 = Math.cos(ang) * r + 150;
y1 = Math.sin(ang) * r + 150;
drawline(150,150,x1,y1,color);	
}

function clear() {
    c.fillStyle = '#fff';
    c.clearRect(0, 0, 300, 300);
    c.fillRect(0, 0, 300, 300);
    c.drawImage(img, -10, -10, 320,320)

}
var s = data.getSeconds();
var m = data.getMinutes();
var o = data.getHours();
var sk = 6*Math.PI/4 + s*Math.PI/30;
var mk = 6*Math.PI/4 + m*Math.PI/30 ;
var ok;
if ((mk<(6*Math.PI/4 + 12*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6;
}
if ((mk>(6*Math.PI/4 + 12*Math.PI/30)) && (mk<(6*Math.PI/4 + 24*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 2*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 24*Math.PI/30)) && (mk<(6*Math.PI/4 + 36*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 3*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 36*Math.PI/30)) && (mk<(6*Math.PI/4 + 48*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 4*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 48*Math.PI/30)) && (mk<(6*Math.PI/4 + 54*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 4.5*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 54*Math.PI/30)) && (mk<(6*Math.PI/4 + 60*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 5*Math.PI/30;
}
img.onload  = function () {
clear();

timer(data);      	
rotate(sk,150,'red');
rotate(mk,130,'green');
rotate(ok,100,'blue');
}

setInterval(function () {
		clear();
var dat = new Date();
var s = dat.getSeconds();
var m = dat.getMinutes();
var o = dat.getHours();
timer(dat);
sk = 6*Math.PI/4 + s*Math.PI/30;
mk = 6*Math.PI/4 + m*Math.PI/30 ;
if ((mk<(6*Math.PI/4 + 12*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6;
}
if ((mk>(6*Math.PI/4 + 12*Math.PI/30)) && (mk<(6*Math.PI/4 + 24*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 2*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 24*Math.PI/30)) && (mk<(6*Math.PI/4 + 36*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 3*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 36*Math.PI/30)) && (mk<(6*Math.PI/4 + 48*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 4*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 48*Math.PI/30)) && (mk<(6*Math.PI/4 + 54*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 4.5*Math.PI/30;
}
if ((mk>(6*Math.PI/4 + 54*Math.PI/30)) && (mk<(6*Math.PI/4 + 60*Math.PI/30)))
{
    ok = 6*Math.PI/4 + o*Math.PI/6 + 5*Math.PI/30;
}

rotate(sk,150,'red');
rotate(mk,130,'green');
rotate(ok,100,'blue');

},1000);
	 </script>
</body>
</html>
